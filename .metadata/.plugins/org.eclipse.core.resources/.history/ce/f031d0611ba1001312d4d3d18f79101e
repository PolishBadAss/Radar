package com.example.cameraUse;

import com.example.aplikacja_testowa1.CameraActivity;
import android.hardware.Camera;
import android.hardware.Camera.PictureCallback;


public class TakePhoto {

	
	public static final PictureCallback mPicture = new PictureCallback() 
	{

	    @Override
	    public void onPictureTaken(final byte[] data, final Camera camera) 
	    {
        	
        		new Thread(new Runnable() 
        		{
        			public void run() 
        			{
        				camera.startPreview();
    	            }
        		}).start();
	        	new Thread(new Runnable() 
	        	{
	                public void run() 
	                {
	                   	FastBurst.byteArr[FastBurst.counter]=data;
	                   	FastBurst.counter++;
	    	           
	                }
	            }).start();
	        	
	            // Taking pictures loop!!
	            if(CameraActivity.buttonPushedCounter==1)
	            {
	                takeAnother(camera,mPicture);	                           	
	            }
	            else if(CameraActivity.buttonPushedCounter==2)
	            {
	            	FastBurst.saveThemAll(FastBurst.byteArr, FastBurst.counter);            	
	            }
	            // Taking pictures loop!
	       
	       
	    }
	};
	
	public static void takeAnother(Camera camera,PictureCallback mPicture)
	{
		camera.takePicture(null, null, null, TakePhoto.mPicture);
	}

}
